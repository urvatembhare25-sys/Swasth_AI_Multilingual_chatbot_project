{% extends 'base.html' %}

{% block content %}
<div class="chat-container">
    <div class="chat-overlay" id="chat-overlay" onclick="toggleSidebar()"></div>

    <!-- Sidebar -->
    <aside class="chat-sidebar" id="chat-sidebar">
        <button class="new-chat-btn" onclick="startNewChat()">
            <i class="fa-solid fa-plus"></i> New Chat
        </button>
        <div class="history-list" id="history-list">
            {% for chat in history %}
            <div class="history-item" data-message="{{ chat.message }}" data-response="{{ chat.response }}"
                onclick="loadHistoryItem(this)">
                <span><i class="fa-regular fa-message"></i> {{ chat.message[:25] }}...</span>
                <button class="delete-chat-btn" onclick="deleteChat(event, {{ chat.id }})">
                    <i class="fa-solid fa-trash"></i>
                </button>
            </div>
            {% endfor %}
        </div>
    </aside>

    <!-- Main Chat -->
    <main class="chat-main">
        <button class="mobile-menu-btn" onclick="toggleSidebar()">
            <i class="fa-solid fa-bars"></i>
        </button>

        <div id="welcome-screen" class="welcome-screen">
            <h1 class="welcome-title">Swasth AI</h1>
            <p>Your multilingual health assistant.</p>
            <div class="chips-container">
                <div class="chip" onclick="sendQuickMessage('What are the symptoms of flu?')">Symptoms of Flu?</div>
                <div class="chip" onclick="sendQuickMessage('How to cure a headache?')">Cure Headache?</div>
                <div class="chip" onclick="sendQuickMessage('Tell me about COVID-19')">About COVID-19</div>
                <div class="chip" onclick="sendQuickMessage('Benefits of drinking water')">Benefits of Water</div>
            </div>
        </div>

        <div id="chat-messages" class="chat-messages" style="display: none;">
            <!-- Messages will appear here -->
        </div>

        <div class="input-area">
            <select id="language-select" class="lang-select">
                <option value="en">English</option>
                <option value="hi">Hindi</option>
                <option value="es">Spanish</option>
                <option value="fr">French</option>
                <option value="gu">Gujarati</option>
                <option value="bn">Bengali</option>
            </select>
            <textarea id="chat-input" class="chat-input" placeholder="Type your health query here..."
                rows="1"></textarea>
            <button id="send-btn" class="send-btn">
                <i class="fa-solid fa-paper-plane"></i>
            </button>
            <div class="disclaimer">
                <i class="fas fa-info-circle"></i> For informational purposes only. Consult a doctor for medical advice.
            </div>
        </div>
    </main>
</div>
{% endblock %}